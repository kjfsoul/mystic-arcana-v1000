(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6942],{760:(e,t,r)=>{"use strict";r.d(t,{N:()=>x});var a=r(5155),n=r(2115),s=r(869),i=r(2885),d=r(7494),o=r(845),c=r(7351),l=r(1508);class u extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:r,anchorX:s,root:i}=e,d=(0,n.useId)(),o=(0,n.useRef)(null),c=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,n.useContext)(l.Q);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:n,right:l}=c.current;if(r||!o.current||!e||!t)return;o.current.dataset.motionPopId=d;let u=document.createElement("style");h&&(u.nonce=h);let p=null!=i?i:document.head;return p.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(d,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===s?"left: ".concat(n):"right: ".concat(l),"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{p.removeChild(u),p.contains(u)&&p.removeChild(u)}},[r]),(0,a.jsx)(u,{isPresent:r,childRef:o,sizeRef:c,children:n.cloneElement(t,{ref:o})})}let p=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:d,custom:c,presenceAffectsLayout:l,mode:u,anchorX:p,root:m}=e,_=(0,i.M)(g),f=(0,n.useId)(),x=!0,v=(0,n.useMemo)(()=>(x=!1,{id:f,initial:r,isPresent:s,custom:c,onExitComplete:e=>{for(let t of(_.set(e,!0),_.values()))if(!t)return;d&&d()},register:e=>(_.set(e,!1),()=>_.delete(e))}),[s,_,d]);return l&&x&&(v={...v}),(0,n.useMemo)(()=>{_.forEach((e,t)=>_.set(t,!1))},[s]),n.useEffect(()=>{s||_.size||!d||d()},[s]),"popLayout"===u&&(t=(0,a.jsx)(h,{isPresent:s,anchorX:p,root:m,children:t})),(0,a.jsx)(o.t.Provider,{value:v,children:t})};function g(){return new Map}var m=r(2082);let _=e=>e.key||"";function f(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let x=e=>{let{children:t,custom:r,initial:o=!0,onExitComplete:c,presenceAffectsLayout:l=!0,mode:u="sync",propagate:h=!1,anchorX:g="left",root:x}=e,[v,y]=(0,m.xQ)(h),j=(0,n.useMemo)(()=>f(t),[t]),N=h&&!v?[]:j.map(_),w=(0,n.useRef)(!0),S=(0,n.useRef)(j),C=(0,i.M)(()=>new Map),[P,R]=(0,n.useState)(j),[k,E]=(0,n.useState)(j);(0,d.E)(()=>{w.current=!1,S.current=j;for(let e=0;e<k.length;e++){let t=_(k[e]);N.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[k,N.length,N.join("-")]);let b=[];if(j!==P){let e=[...j];for(let t=0;t<k.length;t++){let r=k[t],a=_(r);N.includes(a)||(e.splice(t,0,r),b.push(r))}return"wait"===u&&b.length&&(e=b),E(f(e)),R(j),null}let{forceRender:D}=(0,n.useContext)(s.L);return(0,a.jsx)(a.Fragment,{children:k.map(e=>{let t=_(e),n=(!h||!!v)&&(j===k||N.includes(t));return(0,a.jsx)(p,{isPresent:n,initial:(!w.current||!!o)&&void 0,custom:r,presenceAffectsLayout:l,mode:u,root:x,onExitComplete:n?void 0:()=>{if(!C.has(t))return;C.set(t,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(null==D||D(),E(S.current),h&&(null==y||y()),c&&c())},anchorX:g,children:e},t)})})}},2503:(e,t,r)=>{Promise.resolve().then(r.bind(r,9536))},3502:e=>{e.exports={container:"page_container__6ub7W",guestContainer:"page_guestContainer__MaS7o",guestMessage:"page_guestMessage__jSKlA",signInButton:"page_signInButton__F3TOx",header:"page_header__YyroW",backLink:"page_backLink__ggwDa",loading:"page_loading__BOxi7",loadingSpinner:"page_loadingSpinner__9sdVA",emptyState:"page_emptyState__gQCve",emptyIcon:"page_emptyIcon__PMQt3",startReadingButton:"page_startReadingButton__Nf8Ky",readingsGrid:"page_readingsGrid__x0NBD",readingCard:"page_readingCard___AXmz",readingHeader:"page_readingHeader__ZqNFs",readingDate:"page_readingDate__qiD6x",cardsPreview:"page_cardsPreview___FVPe",cardPreview:"page_cardPreview__Pa4he",reversed:"page_reversed__miphH",cardName:"page_cardName__a9yx7",reversedLabel:"page_reversedLabel__tSWgS",moreCards:"page_moreCards__6_keF",readingStats:"page_readingStats__IeXmm"}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},9536:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(5155),n=r(2115),s=r(6408),i=r(283),d=r(5695),o=r(2643),c=r(4634),l=r(6874),u=r.n(l),h=r(3502),p=r.n(h);function g(){let{user:e,isGuest:t}=(0,i.A)(),r=(0,d.useRouter)(),[l,h]=(0,n.useState)([]),[g,m]=(0,n.useState)(!0),[_,f]=(0,n.useState)(!1),x=(0,n.useCallback)(async()=>{if(e)try{let{data:t,error:r}=await o.N.from("tarot_readings").select("id, spread_type, cards_drawn, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});r?console.error("Error loading readings:",r):h(t||[])}catch(e){console.error("Failed to load readings:",e)}finally{m(!1)}},[e]);(0,n.useEffect)(()=>{if(t)return void f(!0);x()},[e,t,x]);let v=e=>({single:"Single Card","three-card":"Three Card Spread","celtic-cross":"Celtic Cross"})[e]||e,y=e=>new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:p().guestContainer,children:(0,a.jsxs)(s.P.div,{className:p().guestMessage,initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsx)("h1",{children:"Your Reading History"}),(0,a.jsx)("p",{children:"Sign in to view your past tarot readings and insights."}),(0,a.jsx)("button",{onClick:()=>f(!0),className:p().signInButton,children:"Sign In to View Readings"}),(0,a.jsx)(u(),{href:"/",className:p().backLink,children:"← Back to Home"})]})}),(0,a.jsx)(c.U,{isOpen:_,onClose:()=>{f(!1),r.push("/")},mode:"signin",title:"Sign in to view your readings",subtitle:"Access your personal tarot history"})]}):(0,a.jsxs)("div",{className:p().container,children:[(0,a.jsxs)(s.P.div,{className:p().header,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,a.jsx)("h1",{children:"Your Reading History"}),(0,a.jsx)("p",{children:"Explore your journey through the cards"}),(0,a.jsx)(u(),{href:"/",className:p().backLink,children:"← Back to Home"})]}),g?(0,a.jsxs)("div",{className:p().loading,children:[(0,a.jsx)(s.P.div,{className:p().loadingSpinner,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"\uD83D\uDD2E"}),(0,a.jsx)("p",{children:"Loading your readings..."})]}):0===l.length?(0,a.jsxs)(s.P.div,{className:p().emptyState,initial:{opacity:0},animate:{opacity:1},children:[(0,a.jsx)("div",{className:p().emptyIcon,children:"\uD83C\uDF1F"}),(0,a.jsx)("h2",{children:"No readings yet"}),(0,a.jsx)("p",{children:"Your tarot journey awaits. Start your first reading to begin exploring the wisdom of the cards."}),(0,a.jsx)(u(),{href:"/",className:p().startReadingButton,children:"Start Your First Reading"})]}):(0,a.jsx)(s.P.div,{className:p().readingsGrid,initial:{opacity:0},animate:{opacity:1},children:l.map((e,t)=>{var r,n,i,d,o;return(0,a.jsxs)(s.P.div,{className:p().readingCard,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{scale:1.02},children:[(0,a.jsxs)("div",{className:p().readingHeader,children:[(0,a.jsx)("h3",{children:v(e.spread_type)}),(0,a.jsx)("span",{className:p().readingDate,children:y(e.created_at)})]}),(0,a.jsxs)("div",{className:p().cardsPreview,children:[((null==(r=e.cards_drawn)?void 0:r.cards)||[]).slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"".concat(p().cardPreview," ").concat(e.isReversed?p().reversed:""),children:[(0,a.jsx)("span",{className:p().cardName,children:e.name}),e.isReversed&&(0,a.jsx)("span",{className:p().reversedLabel,children:"Reversed"})]},t)),((null==(n=e.cards_drawn)?void 0:n.cards)||[]).length>3&&(0,a.jsxs)("div",{className:p().moreCards,children:["+",((null==(i=e.cards_drawn)?void 0:i.cards)||[]).length-3," more"]})]}),(0,a.jsxs)("div",{className:p().readingStats,children:[(0,a.jsxs)("span",{children:[((null==(d=e.cards_drawn)?void 0:d.cards)||[]).length," cards drawn"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[((null==(o=e.cards_drawn)?void 0:o.cards)||[]).filter(e=>e.isReversed).length," reversed"]})]})]},e.id)})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3927,6245,6408,9535,6874,4634,8441,1684,7358],()=>t(2503)),_N_E=e.O()}]);