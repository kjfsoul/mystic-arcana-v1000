(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2580],{283:(e,s,t)=>{"use strict";t.d(s,{A:()=>c,AuthProvider:()=>l});var r=t(5155),i=t(2115),n=t(2643),o=t(6526);let a=(0,i.createContext)(void 0);function l(e){let{children:s}=e,[t,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{console.log("\uD83D\uDD04 Getting initial session...");try{var e,s;let{data:{session:t},error:r}=await n.N.auth.getSession();r?console.error("❌ Error getting session:",r):console.log("✅ Initial session loaded:",{user:(null==t||null==(e=t.user)?void 0:e.email)||"none",session:t?"present":"missing",accessToken:(null==t?void 0:t.access_token)?"present":"missing"}),u(t),l(null!=(s=null==t?void 0:t.user)?s:null)}catch(e){console.error("❌ Unexpected error getting session:",e)}finally{h(!1)}})();let{data:{subscription:e}}=n.N.auth.onAuthStateChange(async(e,s)=>{var t,r;console.log("\uD83D\uDD04 Auth state change:",{event:e,user:(null==s||null==(t=s.user)?void 0:t.email)||"none",session:s?"present":"missing"}),u(s),l(null!=(r=null==s?void 0:s.user)?r:null),h(!1)});return()=>e.unsubscribe()},[]);let g=async(e,s,t)=>{var r;let i=await n.N.auth.signUp({email:e,password:s,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if((null==(r=i.data)?void 0:r.user)&&!i.error){if(t&&Object.keys(t).length>0)try{await o.p.createProfile(i.data.user.id,t),console.log("✅ Profile created successfully")}catch(e){console.error("❌ Error creating profile:",e)}i.data.session||console.log("\uD83D\uDCE7 Email confirmation required for:",e)}return i},p=async(e,s)=>await n.N.auth.signInWithPassword({email:e,password:s}),f=async()=>await n.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}}),m=async()=>await n.N.auth.signOut();return(0,r.jsx)(a.Provider,{value:{user:t,session:c,loading:d,signUp:g,signIn:p,signInWithGoogle:f,signOut:m,isGuest:!t},children:s})}function c(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1177:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(5155),i=t(2115),n=t(283),o=t(2643);function a(){let{user:e,session:s,isGuest:t}=(0,n.A)(),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),d=async()=>{u(!0);let e="test".concat(Date.now(),"@example.com");try{let{data:s,error:t}=await o.N.auth.signUp({email:e,password:"TestPassword123!",options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});t?l("❌ Signup Error: ".concat(t.message)):s.user&&!s.session?l("\uD83D\uDCE7 Success! Email confirmation required for: ".concat(e)):s.session?l("✅ Success! Auto-logged in as: ".concat(e)):l("⚠️ Unexpected response")}catch(e){l("❌ Exception: ".concat(e))}finally{u(!1)}},h=async()=>{u(!0);try{let{data:e,error:s}=await o.N.auth.signInWithPassword({email:"test@example.com",password:"password"});s?l("❌ SignIn Error: ".concat(s.message)):e.session&&l("✅ Signed in successfully!")}catch(e){l("❌ Exception: ".concat(e))}finally{u(!1)}},g=async()=>{u(!0);try{let{error:e}=await o.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});e?l("❌ OAuth Error: ".concat(e.message)):l("✅ Redirecting to Google...")}catch(e){l("❌ Exception: ".concat(e))}finally{u(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Authentication Test Page"}),(0,r.jsxs)("div",{className:"mb-8 p-4 bg-gray-900 rounded",children:[(0,r.jsx)("h2",{className:"text-xl mb-4",children:"Current Auth State:"}),(0,r.jsx)("pre",{className:"text-sm",children:JSON.stringify({isGuest:t,user:(null==e?void 0:e.email)||null,session:!!s,userId:(null==e?void 0:e.id)||null},null,2)})]}),(0,r.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,r.jsx)("button",{onClick:d,disabled:c,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded disabled:opacity-50",children:"Test Sign Up"}),(0,r.jsx)("button",{onClick:h,disabled:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50 ml-4",children:"Test Sign In"}),(0,r.jsx)("button",{onClick:g,disabled:c,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded disabled:opacity-50 ml-4",children:"Test Google OAuth"})]}),a&&(0,r.jsxs)("div",{className:"p-4 bg-gray-900 rounded",children:[(0,r.jsx)("h3",{className:"text-lg mb-2",children:"Test Result:"}),(0,r.jsx)("p",{children:a})]})]})}},2643:(e,s,t)=>{"use strict";let r;t.d(s,{N:()=>n});var i=t(1916);let n=function(){if(r)return r;let e="https://pqfsbxcbsxuyfgqrxdob.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBxZnNieGNic3h1eWZncXJ4ZG9iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NDk4MDAsImV4cCI6MjA2MzUyNTgwMH0.RH_VQLoTOdAauUciYWC39Wto1ZmK28gWjQ9eWJ0FEGU";if(!e||!s)throw Error("Missing Supabase environment variables. Please check NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file.");return r=(0,i.createBrowserClient)(e,s)}()},3831:(e,s,t)=>{Promise.resolve().then(t.bind(t,1177))},6526:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var r=t(2643);let i={async createProfile(e,s){let{data:t,error:i}=await r.N.from("user_profiles").insert([{user_id:e,...s}]).select().single();if(i)throw console.error("Error creating profile:",i),i;return t},async updateProfile(e,s){let{data:t,error:i}=await r.N.from("user_profiles").update(s).eq("user_id",e);if(i)throw console.error("Error updating profile:",i),i;return t},async getProfile(e){try{let{data:s,error:t}=await r.N.from("user_profiles").select("*").eq("user_id",e).maybeSingle();if(t)throw console.error("Error fetching profile:",t),t;if(!s)return console.log("Creating profile for user ".concat(e)),await this.createProfile(e,{});return s}catch(e){throw console.error("Profile service error:",e),e}}}}},e=>{var s=s=>e(e.s=s);e.O(0,[9535,8441,1684,7358],()=>s(3831)),_N_E=e.O()}]);