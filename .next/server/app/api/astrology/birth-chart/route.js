(()=>{var e={};e.id=2273,e.ids=[2273],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79646:e=>{"use strict";e.exports=require("child_process")},96404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>y});var a={};r.r(a),r.d(a,{POST:()=>h});var s=r(96559),o=r(48088),i=r(37719),n=r(32190),c=r(79646),l=r(33873),u=r.n(l);async function h(e){try{var t;let r=await e.json();if(!r.birthData)return n.NextResponse.json({success:!1,error:"Birth data is required"},{status:400});let a={name:r.birthData.name||"User",year:new Date(r.birthData.date).getFullYear(),month:new Date(r.birthData.date).getMonth()+1,day:new Date(r.birthData.date).getDate(),hour:new Date(r.birthData.date).getHours(),minute:new Date(r.birthData.date).getMinutes(),city:r.birthData.city,country:r.birthData.country||""},s=await (t="birth_chart",new Promise(e=>{let r=process.env.PYTHON_PATH||"python3",s=u().join(process.cwd(),"src/services/astrology-python/simple_astrology.py"),o=(0,c.spawn)(r,[s,t,JSON.stringify(a)]),i="",n="";o.stdout.on("data",e=>{i+=e.toString()}),o.stderr.on("data",e=>{n+=e.toString()}),o.on("close",t=>{if(0!==t){console.error("Python script error:",n),e({success:!1,error:`Python script failed with code ${t}: ${n}`});return}try{let t=JSON.parse(i);e(t)}catch(t){console.error("Failed to parse Python output:",i),e({success:!1,error:`Failed to parse Python output: ${t}`})}}),o.on("error",t=>{console.error("Failed to spawn Python process:",t),e({success:!1,error:`Failed to spawn Python process: ${t.message}`})}),setTimeout(()=>{o.kill(),e({success:!1,error:"Python script timeout"})},3e4)}));if(!s.success||!s.data)return n.NextResponse.json({success:!0,data:{svg:'<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"><circle cx="200" cy="200" r="180" fill="none" stroke="#6B7280" stroke-width="2" stroke-dasharray="10,5"/><text x="200" y="200" text-anchor="middle" fill="#6B7280" font-size="16">Chart Unavailable</text></svg>',signSummary:"Birth chart temporarily unavailable. Our astrological calculation service is currently offline. We use authentic astronomical calculations with Swiss Ephemeris data to generate your complete natal chart. Please try again in a few moments.",houseBreakdown:["Birth chart service temporarily unavailable","Please try again in a few moments","We use Swiss Ephemeris for accurate calculations"],isUnavailable:!0}});let o={svg:s.data.svg_chart,signSummary:s.data.sign_summary,houseBreakdown:s.data.house_breakdown};return n.NextResponse.json({success:!0,data:o})}catch(e){return console.error("Birth chart API error:",e),n.NextResponse.json({success:!0,data:{svg:'<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"><circle cx="200" cy="200" r="180" fill="none" stroke="#6B7280" stroke-width="2" stroke-dasharray="10,5"/><text x="200" y="200" text-anchor="middle" fill="#6B7280" font-size="16">Chart Unavailable</text></svg>',signSummary:"We're currently experiencing technical difficulties with our astrological calculation service. Please try again in a few moments.",houseBreakdown:["Service temporarily unavailable","Please try again later","Your chart will be available when service is restored"],isUnavailable:!0,error:e instanceof Error?e.message:"Unknown error"}})}}let p=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/astrology/birth-chart/route",pathname:"/api/astrology/birth-chart",filename:"route",bundlePath:"app/api/astrology/birth-chart/route"},resolvedPagePath:"/Users/kfitz/mystic-arcana-v1000/src/app/api/astrology/birth-chart/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:d,workUnitAsyncStorage:y,serverHooks:g}=p;function m(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:y})}},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,580],()=>r(96404));module.exports=a})();