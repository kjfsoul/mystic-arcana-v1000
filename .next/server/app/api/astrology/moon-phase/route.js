(()=>{var e={};e.id=2530,e.ids=[2530],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29200:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>m});var o={};r.r(o),r.d(o,{GET:()=>l});var s=r(96559),n=r(48088),a=r(37719),i=r(32190),u=r(79646),c=r(33873),p=r.n(c);async function l(){try{var e;let t=await (e="moon_phase",new Promise(t=>{let r=process.env.PYTHON_PATH||"python3",o=p().join(process.cwd(),"src/services/astrology-python/simple_astrology.py"),s=(0,u.spawn)(r,[o,e]),n="",a="";s.stdout.on("data",e=>{n+=e.toString()}),s.stderr.on("data",e=>{a+=e.toString()}),s.on("close",e=>{if(0!==e){console.error("Python script error:",a),t({success:!1,error:`Python script failed with code ${e}: ${a}`});return}try{let e=JSON.parse(n);t(e)}catch(e){console.error("Failed to parse Python output:",n),t({success:!1,error:`Failed to parse Python output: ${e}`})}}),s.on("error",e=>{console.error("Failed to spawn Python process:",e),t({success:!1,error:`Failed to spawn Python process: ${e.message}`})}),setTimeout(()=>{s.kill(),t({success:!1,error:"Python script timeout"})},3e4)}));if(!t.success||!t.data)return i.NextResponse.json({success:!0,data:{phase:"Moon phase temporarily unavailable",illumination:0,emoji:"\uD83C\uDF19",nextFullMoon:new Date(Date.now()+1296e6).toISOString(),nextNewMoon:new Date(Date.now()+2592e6).toISOString(),isUnavailable:!0}});let r={phase:t.data.phase_name,illumination:Math.round(100*t.data.illumination),emoji:function(e){let t=e.toLowerCase();return t.includes("new")?"\uD83C\uDF11":t.includes("waxing crescent")?"\uD83C\uDF12":t.includes("first quarter")?"\uD83C\uDF13":t.includes("waxing gibbous")?"\uD83C\uDF14":t.includes("full")?"\uD83C\uDF15":t.includes("waning gibbous")?"\uD83C\uDF16":t.includes("last quarter")||t.includes("third quarter")?"\uD83C\uDF17":t.includes("waning crescent")?"\uD83C\uDF18":"\uD83C\uDF19"}(t.data.phase_name),nextFullMoon:t.data.next_full_moon,nextNewMoon:t.data.next_new_moon};return i.NextResponse.json({success:!0,data:r})}catch(e){return console.error("Moon phase API error:",e),i.NextResponse.json({success:!0,data:{phase:"Moon phase temporarily unavailable",illumination:0,emoji:"\uD83C\uDF19",nextFullMoon:new Date(Date.now()+1296e6).toISOString(),nextNewMoon:new Date(Date.now()+2592e6).toISOString(),isUnavailable:!0,error:e instanceof Error?e.message:"Unknown error"}})}}let d=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/astrology/moon-phase/route",pathname:"/api/astrology/moon-phase",filename:"route",bundlePath:"app/api/astrology/moon-phase/route"},resolvedPagePath:"/Users/kfitz/mystic-arcana-v1000/src/app/api/astrology/moon-phase/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:h,workUnitAsyncStorage:m,serverHooks:w}=d;function x(){return(0,a.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:m})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79646:e=>{"use strict";e.exports=require("child_process")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[4447,580],()=>r(29200));module.exports=o})();