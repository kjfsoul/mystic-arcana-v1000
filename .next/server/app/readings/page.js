(()=>{var e={};e.id=6942,e.ids=[6942],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9465:(e,t,r)=>{Promise.resolve().then(r.bind(r,45878))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16189:(e,t,r)=>{"use strict";var s=r(65773);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35515:e=>{e.exports={container:"page_container__6ub7W",guestContainer:"page_guestContainer__MaS7o",guestMessage:"page_guestMessage__jSKlA",signInButton:"page_signInButton__F3TOx",header:"page_header__YyroW",backLink:"page_backLink__ggwDa",loading:"page_loading__BOxi7",loadingSpinner:"page_loadingSpinner__9sdVA",emptyState:"page_emptyState__gQCve",emptyIcon:"page_emptyIcon__PMQt3",startReadingButton:"page_startReadingButton__Nf8Ky",readingsGrid:"page_readingsGrid__x0NBD",readingCard:"page_readingCard___AXmz",readingHeader:"page_readingHeader__ZqNFs",readingDate:"page_readingDate__qiD6x",cardsPreview:"page_cardsPreview___FVPe",cardPreview:"page_cardPreview__Pa4he",reversed:"page_reversed__miphH",cardName:"page_cardName__a9yx7",reversedLabel:"page_reversedLabel__tSWgS",moreCards:"page_moreCards__6_keF",readingStats:"page_readingStats__IeXmm"}},45878:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kfitz/mystic-arcana-v1000/src/app/readings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kfitz/mystic-arcana-v1000/src/app/readings/page.tsx","default")},45913:(e,t,r)=>{Promise.resolve().then(r.bind(r,85984))},52125:e=>{e.exports={backdrop:"AuthModal_backdrop__E_vjX",modal:"AuthModal_modal__7Ph6j",closeButton:"AuthModal_closeButton__Jugdv",header:"AuthModal_header__ZF0q9",title:"AuthModal_title__rlHlr",subtitle:"AuthModal_subtitle__dZ_Yg",form:"AuthModal_form__y8L_8",inputGroup:"AuthModal_inputGroup__aBBEo",label:"AuthModal_label__9F9Hu",input:"AuthModal_input__Vcf7N",error:"AuthModal_error__LlxgV",success:"AuthModal_success__Cplsg",submitButton:"AuthModal_submitButton__pwpua",divider:"AuthModal_divider__hXF3G",googleButton:"AuthModal_googleButton__fbfPl",googleIcon:"AuthModal_googleIcon__ligd4",footer:"AuthModal_footer__ostx6",linkButton:"AuthModal_linkButton__fw2TK",forgotPassword:"AuthModal_forgotPassword__Z9Zdz"}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65246:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["readings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,45878)),"/Users/kfitz/mystic-arcana-v1000/src/app/readings/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/kfitz/mystic-arcana-v1000/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/kfitz/mystic-arcana-v1000/src/app/readings/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/readings/page",pathname:"/readings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},66650:(e,t,r)=>{"use strict";r.d(t,{U:()=>u});var s=r(60687),a=r(43210),i=r.n(a),n=r(88920),o=r(26001),l=r(63213),d=r(52125),c=r.n(d);let u=({isOpen:e,onClose:t,mode:r="signin",title:d="Welcome to Mystic Arcana",subtitle:u="Sign in to unlock your personalized journey"})=>{let[p,h]=(0,a.useState)(r);i().useEffect(()=>{e&&(h(r),g(""),x(""),v(""),j(""),N(""),S(null))},[e,r]);let[m,g]=(0,a.useState)(""),[_,x]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[b,N]=(0,a.useState)(""),[w,P]=(0,a.useState)(!1),[C,S]=(0,a.useState)(null),[k,M]=(0,a.useState)(null),{signIn:A,signUp:B,signInWithGoogle:R}=(0,l.A)(),q=async e=>{e.preventDefault(),P(!0),S(null),M(null);try{if("signin"===p){let{error:e}=await A(m,_);e?S(e.message):t()}else{let e={};f&&(e.birth_date=f),y&&(e.birth_time=y),b&&(e.birth_location=b);let{data:r,error:s}=await B(m,_,e);s?S(s.message):r?.user&&!r.session?(M("Check your email to confirm your account!"),g(""),x(""),v(""),j(""),N("")):r?.session&&t()}}catch{S("An unexpected error occurred")}finally{P(!1)}},E=async()=>{P(!0),S(null);try{let{error:e}=await R();e&&S(e.message)}catch{S("Failed to sign in with Google")}finally{P(!1)}},F=()=>{h("signin"===p?"signup":"signin"),S(null)};return(0,s.jsx)(n.N,{children:e&&(0,s.jsx)(o.P.div,{className:c().backdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{e.target===e.currentTarget&&t()},children:(0,s.jsxs)(o.P.div,{className:c().modal,initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},transition:{type:"spring",damping:25,stiffness:300},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{className:c().closeButton,onClick:t,"aria-label":"Close modal",children:"\xd7"}),(0,s.jsxs)("div",{className:c().header,children:[(0,s.jsx)("h2",{className:c().title,children:d}),(0,s.jsx)("p",{className:c().subtitle,children:u})]}),(0,s.jsxs)("form",{onSubmit:q,className:c().form,children:[(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{htmlFor:"email",className:c().label,children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",value:m,onChange:e=>g(e.target.value),className:c().input,placeholder:"Enter your email",required:!0})]}),(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{htmlFor:"password",className:c().label,children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",value:_,onChange:e=>x(e.target.value),className:c().input,placeholder:"Enter your password",required:!0,minLength:6})]}),"signup"===p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{htmlFor:"birthDate",className:c().label,children:"Birth Date"}),(0,s.jsx)("input",{id:"birthDate",type:"date",value:f,onChange:e=>v(e.target.value),className:c().input,required:!0})]}),(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{htmlFor:"birthTime",className:c().label,children:"Birth Time (Optional)"}),(0,s.jsx)("input",{id:"birthTime",type:"time",value:y,onChange:e=>j(e.target.value),className:c().input})]}),(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{htmlFor:"birthLocation",className:c().label,children:"Birth Location (Optional)"}),(0,s.jsx)("input",{id:"birthLocation",type:"text",value:b,onChange:e=>N(e.target.value),className:c().input,placeholder:"City, Country"})]})]}),C&&(0,s.jsx)("div",{className:c().error,role:"alert",children:C}),k&&(0,s.jsx)("div",{className:c().success,role:"alert",children:k}),(0,s.jsx)("button",{type:"submit",className:c().submitButton,disabled:w||!!k,children:w?"Loading...":"signin"===p?"Sign In":"Sign Up"})]}),(0,s.jsx)("div",{className:c().divider,children:(0,s.jsx)("span",{children:"or"})}),(0,s.jsxs)("button",{type:"button",onClick:E,className:c().googleButton,disabled:w,children:[(0,s.jsx)("span",{className:c().googleIcon,children:"G"}),"Continue with Google"]}),(0,s.jsx)("div",{className:c().footer,children:"signin"===p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Don't have an account?"," ",(0,s.jsx)("button",{type:"button",onClick:F,className:c().linkButton,children:"Sign up"})]}),(0,s.jsx)("p",{className:c().forgotPassword,children:(0,s.jsx)("a",{href:"/auth/reset-password",className:c().linkButton,children:"Forgot your password?"})})]}):(0,s.jsxs)("p",{children:["Already have an account?"," ",(0,s.jsx)("button",{type:"button",onClick:F,className:c().linkButton,children:"Sign in"})]})})]})})})}},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},85984:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(60687),a=r(43210),i=r(26001),n=r(63213),o=r(16189),l=r(79481),d=r(66650),c=r(85814),u=r.n(c),p=r(35515),h=r.n(p);function m(){let{user:e,isGuest:t}=(0,n.A)(),r=(0,o.useRouter)(),[c,p]=(0,a.useState)([]),[m,g]=(0,a.useState)(!0),[_,x]=(0,a.useState)(!1);(0,a.useCallback)(async()=>{if(e)try{let{data:t,error:r}=await l.N.from("tarot_readings").select("id, spread_type, cards_drawn, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});r?console.error("Error loading readings:",r):p(t||[])}catch(e){console.error("Failed to load readings:",e)}finally{g(!1)}},[e]);let f=e=>({single:"Single Card","three-card":"Three Card Spread","celtic-cross":"Celtic Cross"})[e]||e,v=e=>new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:h().guestContainer,children:(0,s.jsxs)(i.P.div,{className:h().guestMessage,initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,s.jsx)("h1",{children:"Your Reading History"}),(0,s.jsx)("p",{children:"Sign in to view your past tarot readings and insights."}),(0,s.jsx)("button",{onClick:()=>x(!0),className:h().signInButton,children:"Sign In to View Readings"}),(0,s.jsx)(u(),{href:"/",className:h().backLink,children:"← Back to Home"})]})}),(0,s.jsx)(d.U,{isOpen:_,onClose:()=>{x(!1),r.push("/")},mode:"signin",title:"Sign in to view your readings",subtitle:"Access your personal tarot history"})]}):(0,s.jsxs)("div",{className:h().container,children:[(0,s.jsxs)(i.P.div,{className:h().header,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,s.jsx)("h1",{children:"Your Reading History"}),(0,s.jsx)("p",{children:"Explore your journey through the cards"}),(0,s.jsx)(u(),{href:"/",className:h().backLink,children:"← Back to Home"})]}),m?(0,s.jsxs)("div",{className:h().loading,children:[(0,s.jsx)(i.P.div,{className:h().loadingSpinner,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"\uD83D\uDD2E"}),(0,s.jsx)("p",{children:"Loading your readings..."})]}):0===c.length?(0,s.jsxs)(i.P.div,{className:h().emptyState,initial:{opacity:0},animate:{opacity:1},children:[(0,s.jsx)("div",{className:h().emptyIcon,children:"\uD83C\uDF1F"}),(0,s.jsx)("h2",{children:"No readings yet"}),(0,s.jsx)("p",{children:"Your tarot journey awaits. Start your first reading to begin exploring the wisdom of the cards."}),(0,s.jsx)(u(),{href:"/",className:h().startReadingButton,children:"Start Your First Reading"})]}):(0,s.jsx)(i.P.div,{className:h().readingsGrid,initial:{opacity:0},animate:{opacity:1},children:c.map((e,t)=>(0,s.jsxs)(i.P.div,{className:h().readingCard,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{scale:1.02},children:[(0,s.jsxs)("div",{className:h().readingHeader,children:[(0,s.jsx)("h3",{children:f(e.spread_type)}),(0,s.jsx)("span",{className:h().readingDate,children:v(e.created_at)})]}),(0,s.jsxs)("div",{className:h().cardsPreview,children:[(e.cards_drawn?.cards||[]).slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:`${h().cardPreview} ${e.isReversed?h().reversed:""}`,children:[(0,s.jsx)("span",{className:h().cardName,children:e.name}),e.isReversed&&(0,s.jsx)("span",{className:h().reversedLabel,children:"Reversed"})]},t)),(e.cards_drawn?.cards||[]).length>3&&(0,s.jsxs)("div",{className:h().moreCards,children:["+",(e.cards_drawn?.cards||[]).length-3," more"]})]}),(0,s.jsxs)("div",{className:h().readingStats,children:[(0,s.jsxs)("span",{children:[(e.cards_drawn?.cards||[]).length," cards drawn"]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:[(e.cards_drawn?.cards||[]).filter(e=>e.isReversed).length," reversed"]})]})]},e.id))})]})}},88920:(e,t,r)=>{"use strict";r.d(t,{N:()=>f});var s=r(60687),a=r(43210),i=r(12157),n=r(72789),o=r(15124),l=r(21279),d=r(18171),c=r(32582);class u extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,d.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:t,anchorX:r,root:i}){let n=(0,a.useId)(),o=(0,a.useRef)(null),l=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,a.useContext)(c.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:c,right:u}=l.current;if(t||!o.current||!e||!s)return;let p="left"===r?`left: ${c}`:`right: ${u}`;o.current.dataset.motionPopId=n;let h=document.createElement("style");d&&(h.nonce=d);let m=i??document.head;return m.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${p}px !important;
            top: ${a}px !important;
          }
        `),()=>{m.removeChild(h),m.contains(h)&&m.removeChild(h)}},[t]),(0,s.jsx)(u,{isPresent:t,childRef:o,sizeRef:l,children:a.cloneElement(e,{ref:o})})}let h=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:o,presenceAffectsLayout:d,mode:c,anchorX:u,root:h})=>{let g=(0,n.M)(m),_=(0,a.useId)(),x=!0,f=(0,a.useMemo)(()=>(x=!1,{id:_,initial:t,isPresent:r,custom:o,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;i&&i()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[r,g,i]);return d&&x&&(f={...f}),(0,a.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[r]),a.useEffect(()=>{r||g.size||!i||i()},[r]),"popLayout"===c&&(e=(0,s.jsx)(p,{isPresent:r,anchorX:u,root:h,children:e})),(0,s.jsx)(l.t.Provider,{value:f,children:e})};function m(){return new Map}var g=r(86044);let _=e=>e.key||"";function x(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let f=({children:e,custom:t,initial:r=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:p="left",root:m})=>{let[f,v]=(0,g.xQ)(u),y=(0,a.useMemo)(()=>x(e),[e]),j=u&&!f?[]:y.map(_),b=(0,a.useRef)(!0),N=(0,a.useRef)(y),w=(0,n.M)(()=>new Map),[P,C]=(0,a.useState)(y),[S,k]=(0,a.useState)(y);(0,o.E)(()=>{b.current=!1,N.current=y;for(let e=0;e<S.length;e++){let t=_(S[e]);j.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[S,j.length,j.join("-")]);let M=[];if(y!==P){let e=[...y];for(let t=0;t<S.length;t++){let r=S[t],s=_(r);j.includes(s)||(e.splice(t,0,r),M.push(r))}return"wait"===c&&M.length&&(e=M),k(x(e)),C(y),null}let{forceRender:A}=(0,a.useContext)(i.L);return(0,s.jsx)(s.Fragment,{children:S.map(e=>{let a=_(e),i=(!u||!!f)&&(y===S||j.includes(a));return(0,s.jsx)(h,{isPresent:i,initial:(!b.current||!!r)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,root:m,onExitComplete:i?void 0:()=>{if(!w.has(a))return;w.set(a,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(A?.(),k(N.current),u&&v?.(),l&&l())},anchorX:p,children:e},a)})})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,122,1658,2240],()=>r(65246));module.exports=s})();