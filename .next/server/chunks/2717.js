exports.id=2717,exports.ids=[2717],exports.modules={13967:e=>{e.exports={starFieldContainer:"HighPerformanceStarField_starFieldContainer__YXvcO",galaxyBackground:"HighPerformanceStarField_galaxyBackground__HH3Vp",starCanvas:"HighPerformanceStarField_starCanvas__18fR0",loadingOverlay:"HighPerformanceStarField_loadingOverlay__bHykb",loadingSpinner:"HighPerformanceStarField_loadingSpinner__Hyaof",spin:"HighPerformanceStarField_spin__6e06E",errorOverlay:"HighPerformanceStarField_errorOverlay__Tn7UM",errorMessage:"HighPerformanceStarField_errorMessage__2Sdsn",performanceInfo:"HighPerformanceStarField_performanceInfo__Tzc2H",starCount:"HighPerformanceStarField_starCount__XRyj5",mode:"HighPerformanceStarField_mode__rS8l_",performanceStats:"HighPerformanceStarField_performanceStats__cIK7h",statLine:"HighPerformanceStarField_statLine__3FSnx",statLabel:"HighPerformanceStarField_statLabel__H0Z8g",statValue:"HighPerformanceStarField_statValue__KekFT"}},70440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79678:(e,t,a)=>{"use strict";a.d(t,{r:()=>S});var r=a(60687),i=a(43210);class n{constructor(e){this.program=null,this.instancedProgram=null,this.positionBuffer=null,this.magnitudeBuffer=null,this.colorBuffer=null,this.twinkleBuffer=null,this.instancePositionBuffer=null,this.instanceDataBuffer=null,this.uniforms={},this.attributes={},this.stars=[],this.renderData=null,this.viewMatrix=new Float32Array(16),this.projectionMatrix=new Float32Array(16),this.frustumPlanes=new Float32Array(24),this.stats={totalStars:0,visibleStars:0,culledStars:0,renderTime:0,fps:0},this.frameCount=0,this.lastFrameTime=0,this.fpsUpdateTime=0,this.canvas=e,console.log("\uD83C\uDFAE Initializing HighPerformanceStarRenderer..."),console.log(`üìê Canvas dimensions: ${e.width}x${e.height}`),console.log(`üìè Canvas style: ${e.style.width}x${e.style.height}`);let t=e.getContext("webgl2",{alpha:!1,depth:!0,stencil:!1,antialias:!1,powerPreference:"high-performance"});if(!t)throw Error("WebGL2 not supported");console.log("‚úÖ WebGL2 context created"),this.gl=t,this.initializeWebGL()}initializeWebGL(){let{gl:e}=this;"drawArraysInstanced"in e?console.info("\uD83D\uDE80 High-performance instanced rendering enabled"):console.info("\uD83C\uDFAE Using standard rendering (WebGL2 instanced rendering available)"),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clearColor(0,0,.05,1),this.createShaderPrograms(),this.setupBuffers()}createShaderPrograms(){let e=`#version 300 es
      precision highp float;
      
      in vec3 a_position;
      in float a_magnitude;
      in float a_colorIndex;
      in float a_twinklePhase;
      
      uniform mat4 u_viewMatrix;
      uniform mat4 u_projectionMatrix;
      uniform float u_time;
      uniform float u_pixelRatio;
      uniform vec2 u_resolution;
      
      out float v_magnitude;
      out float v_colorIndex;
      out float v_alpha;
      out float v_size;
      
      void main() {
        vec4 worldPos = vec4(a_position, 1.0);
        vec4 viewPos = u_viewMatrix * worldPos;
        gl_Position = u_projectionMatrix * viewPos;
        
        // Calculate star size based on magnitude and distance
        float baseMagnitude = 6.0 - a_magnitude; // Invert magnitude (brighter = larger)
        float distance = length(viewPos.xyz);
        float size = max(1.0, baseMagnitude * 2.0 / distance) * u_pixelRatio;
        
        // Add atmospheric twinkling
        float twinkle = 0.8 + 0.2 * sin(u_time * 0.003 + a_twinklePhase);
        size *= twinkle;
        
        // Limit maximum size for performance
        gl_PointSize = min(size, 20.0);
        
        // Calculate alpha based on magnitude and atmospheric effects
        float atmosphericDimming = 1.0 - smoothstep(0.0, 100.0, distance);
        v_alpha = max(0.1, (1.0 - (a_magnitude - 1.0) / 5.0)) * twinkle * atmosphericDimming;
        v_magnitude = a_magnitude;
        v_colorIndex = a_colorIndex;
        v_size = size;
      }
    `,t=`#version 300 es
      precision highp float;
      
      in float v_magnitude;
      in float v_colorIndex;
      in float v_alpha;
      in float v_size;
      
      out vec4 fragColor;
      
      // Convert B-V color index to RGB
      vec3 colorFromBV(float bv) {
        if (bv < -0.3) return vec3(0.6, 0.7, 1.0);      // Blue
        if (bv < 0.0) return vec3(0.7, 0.75, 1.0);      // Blue-white
        if (bv < 0.3) return vec3(0.8, 0.85, 1.0);      // White
        if (bv < 0.6) return vec3(1.0, 0.97, 0.9);      // Yellow-white
        if (bv < 1.0) return vec3(1.0, 0.9, 0.7);       // Yellow
        if (bv < 1.4) return vec3(1.0, 0.8, 0.6);       // Orange
        return vec3(1.0, 0.7, 0.4);                     // Red
      }
      
      void main() {
        // Create circular star shape with soft edges
        vec2 coord = gl_PointCoord - vec2(0.5);
        float dist = length(coord);
        
        if (dist > 0.5) {
          discard;
        }
        
        // Create star glow effect
        float glow = 1.0 - smoothstep(0.0, 0.5, dist);
        glow = pow(glow, 1.5);
        
        // Add diffraction spikes for bright stars
        float spikes = 1.0;
        if (v_magnitude < 3.0 && v_size > 5.0) {
          float angle = atan(coord.y, coord.x);
          float spike1 = abs(sin(angle * 2.0));
          float spike2 = abs(cos(angle * 2.0));
          spikes = 1.0 + 0.4 * max(spike1, spike2) * (1.0 - dist * 2.0);
        }
        
        vec3 color = colorFromBV(v_colorIndex);
        float alpha = v_alpha * glow * spikes;
        
        // Add subtle chromatic aberration for realism
        if (v_magnitude < 2.0) {
          color.r *= 1.0 + 0.1 * (1.0 - dist);
          color.b *= 1.0 + 0.05 * dist;
        }
        
        fragColor = vec4(color, alpha);
      }
    `,a=this.compileShader(e,this.gl.VERTEX_SHADER),r=this.compileShader(t,this.gl.FRAGMENT_SHADER);if(this.program=this.gl.createProgram(),!this.program)throw Error("Failed to create shader program");if(this.gl.attachShader(this.program,a),this.gl.attachShader(this.program,r),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){let e=this.gl.getProgramInfoLog(this.program);throw Error(`Shader program linking failed: ${e}`)}this.uniforms.viewMatrix=this.gl.getUniformLocation(this.program,"u_viewMatrix"),this.uniforms.projectionMatrix=this.gl.getUniformLocation(this.program,"u_projectionMatrix"),this.uniforms.time=this.gl.getUniformLocation(this.program,"u_time"),this.uniforms.pixelRatio=this.gl.getUniformLocation(this.program,"u_pixelRatio"),this.uniforms.resolution=this.gl.getUniformLocation(this.program,"u_resolution"),this.attributes.position=this.gl.getAttribLocation(this.program,"a_position"),this.attributes.magnitude=this.gl.getAttribLocation(this.program,"a_magnitude"),this.attributes.colorIndex=this.gl.getAttribLocation(this.program,"a_colorIndex"),this.attributes.twinklePhase=this.gl.getAttribLocation(this.program,"a_twinklePhase"),console.log("\uD83D\uDD17 Attribute locations:",{position:this.attributes.position,magnitude:this.attributes.magnitude,colorIndex:this.attributes.colorIndex,twinklePhase:this.attributes.twinklePhase})}compileShader(e,t){let{gl:a}=this,r=t===a.VERTEX_SHADER?"vertex":"fragment";console.log(`üîß Compiling ${r} shader...`);let i=a.createShader(t);if(!i)throw Error("Failed to create shader");if(a.shaderSource(i,e),a.compileShader(i),!a.getShaderParameter(i,a.COMPILE_STATUS)){let t=a.getShaderInfoLog(i);throw console.error(`‚ùå ${r} shader compilation failed:`,t),console.error("Shader source:",e),a.deleteShader(i),Error(`Shader compilation failed: ${t}`)}return console.log(`‚úÖ ${r} shader compiled successfully`),i}setupBuffers(){let{gl:e}=this;if(this.positionBuffer=e.createBuffer(),this.magnitudeBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.twinkleBuffer=e.createBuffer(),!this.positionBuffer||!this.magnitudeBuffer||!this.colorBuffer||!this.twinkleBuffer)throw Error("Failed to create vertex buffers")}loadStars(e){this.stars=e,this.prepareRenderData(),this.uploadToGPU(),this.stats.totalStars=e.length,console.log(`üåü Loaded ${e.length} stars for high-performance rendering`)}prepareRenderData(){let e=this.stars.length;console.log(`üîÑ Preparing render data for ${e} stars...`),this.renderData={position:new Float32Array(3*e),magnitude:new Float32Array(e),colorIndex:new Float32Array(e),twinklePhase:new Float32Array(e),visible:new Uint8Array(e)},console.log(`üìä Allocated arrays: positions(${this.renderData.position.length}), magnitudes(${this.renderData.magnitude.length}), colors(${this.renderData.colorIndex.length}), twinkle(${this.renderData.twinklePhase.length})`);for(let t=0;t<e;t++){let e=this.stars[t],a=3*t,r=(e.ra??0)*Math.PI/180,i=(e.dec??0)*Math.PI/180;this.renderData.position[a]=Math.cos(i)*Math.cos(r),this.renderData.position[a+1]=Math.cos(i)*Math.sin(r),this.renderData.position[a+2]=Math.sin(i),this.renderData.magnitude[t]=e.magnitude,this.renderData.colorIndex[t]=e.colorIndex||0,this.renderData.twinklePhase[t]=Math.random()*Math.PI*2,this.renderData.visible[t]=1}}uploadToGPU(){if(!this.renderData)return;let{gl:e}=this;e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.bufferData(e.ARRAY_BUFFER,this.renderData.position,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.magnitudeBuffer),e.bufferData(e.ARRAY_BUFFER,this.renderData.magnitude,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.renderData.colorIndex,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.twinkleBuffer),e.bufferData(e.ARRAY_BUFFER,this.renderData.twinklePhase,e.STATIC_DRAW)}render(e=Date.now()){let t=performance.now();if(!this.program||!this.renderData)return this.stats;let{gl:a}=this;a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.useProgram(this.program),this.setupVertexAttributes(),a.uniformMatrix4fv(this.uniforms.viewMatrix,!1,this.viewMatrix),a.uniformMatrix4fv(this.uniforms.projectionMatrix,!1,this.projectionMatrix),a.uniform1f(this.uniforms.time,e),a.uniform1f(this.uniforms.pixelRatio,window.devicePixelRatio||1),a.uniform2f(this.uniforms.resolution,this.canvas.width,this.canvas.height);let r=this.performFrustumCulling();this.frameCount%60==0&&console.log(`üé® Drawing ${r} stars... (frame ${this.frameCount})`),a.drawArrays(a.POINTS,0,r);let i=a.getError();i!==a.NO_ERROR&&console.error("‚ùå WebGL error during draw:",i);let n=performance.now()-t;return this.updateStats(n,r),this.stats}setupVertexAttributes(){let{gl:e}=this;null!==this.attributes.position&&this.attributes.position>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.enableVertexAttribArray(this.attributes.position),e.vertexAttribPointer(this.attributes.position,3,e.FLOAT,!1,0,0)),null!==this.attributes.magnitude&&this.attributes.magnitude>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.magnitudeBuffer),e.enableVertexAttribArray(this.attributes.magnitude),e.vertexAttribPointer(this.attributes.magnitude,1,e.FLOAT,!1,0,0)),null!==this.attributes.colorIndex&&this.attributes.colorIndex>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.enableVertexAttribArray(this.attributes.colorIndex),e.vertexAttribPointer(this.attributes.colorIndex,1,e.FLOAT,!1,0,0)),null!==this.attributes.twinklePhase&&this.attributes.twinklePhase>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.twinkleBuffer),e.enableVertexAttribArray(this.attributes.twinklePhase),e.vertexAttribPointer(this.attributes.twinklePhase,1,e.FLOAT,!1,0,0))}performFrustumCulling(){return this.stats.totalStars}updateStats(e,t){this.stats.renderTime=e,this.stats.visibleStars=t,this.stats.culledStars=this.stats.totalStars-t,this.frameCount++;let a=performance.now();a-this.fpsUpdateTime>1e3&&(this.stats.fps=this.frameCount/((a-this.fpsUpdateTime)/1e3),this.frameCount=0,this.fpsUpdateTime=a)}updateMatrices(e,t){this.viewMatrix.set(e),this.projectionMatrix.set(t)}resize(e,t){let a=window.devicePixelRatio||1;this.canvas.width=e*a,this.canvas.height=t*a,this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`,this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}getStats(){return{...this.stats}}dispose(){let{gl:e}=this;this.program&&e.deleteProgram(this.program),this.positionBuffer&&e.deleteBuffer(this.positionBuffer),this.magnitudeBuffer&&e.deleteBuffer(this.magnitudeBuffer),this.colorBuffer&&e.deleteBuffer(this.colorBuffer),this.twinkleBuffer&&e.deleteBuffer(this.twinkleBuffer)}}var o=function(e){return e.SUN="Sun",e.MOON="Moon",e.MERCURY="Mercury",e.VENUS="Venus",e.MARS="Mars",e.JUPITER="Jupiter",e.SATURN="Saturn",e.URANUS="Uranus",e.NEPTUNE="Neptune",e.PLUTO="Pluto",e.CHIRON="Chiron",e.NORTH_NODE="North Node",e.SOUTH_NODE="South Node",e}({}),s=function(e){return e.ARIES="Aries",e.TAURUS="Taurus",e.GEMINI="Gemini",e.CANCER="Cancer",e.LEO="Leo",e.VIRGO="Virgo",e.LIBRA="Libra",e.SCORPIO="Scorpio",e.SAGITTARIUS="Sagittarius",e.CAPRICORN="Capricorn",e.AQUARIUS="Aquarius",e.PISCES="Pisces",e}({}),l=function(e){return e.CONJUNCTION="Conjunction",e.OPPOSITION="Opposition",e.TRINE="Trine",e.SQUARE="Square",e.SEXTILE="Sextile",e.QUINCUNX="Quincunx",e.SEMISEXTILE="Semisextile",e.SEMISQUARE="Semisquare",e.SESQUIQUADRATE="Sesquiquadrate",e}({});class c{constructor(e={}){this.isInitialized=!1,this.calculationCache=new Map,this.CACHE_TTL=6e4,this.config={apiEndpoint:e.apiEndpoint||"/api/ephemeris",timeout:e.timeout||3e4,precision:e.precision||"high",useMockData:e.useMockData??!0}}async initialize(){try{if(this.config.useMockData)return console.log("Swiss Ephemeris bridge initialized with mock data"),this.isInitialized=!0,!0;let e=await this.validateInstallation();return e.success||(console.warn(`Swiss Ephemeris API validation failed: ${e.error}, falling back to mock data`),this.config.useMockData=!0),this.isInitialized=!0,console.log("Swiss Ephemeris bridge initialized successfully"),!0}catch(e){return console.error("Failed to initialize Swiss Ephemeris bridge:",e),this.config.useMockData=!0,this.isInitialized=!0,!0}}async calculatePlanetaryPositions(e){if(!this.isInitialized)throw Error("Swiss Ephemeris bridge not initialized");let t=this.generateCacheKey("planets",e),a=this.getFromCache(t);if(a)return a;try{if(this.config.useMockData){let a=this.generateMockPlanetaryData(e);return this.setCache(t,a),a}let a=["planetary_positions.py","--datetime",e.datetime.toISOString(),"--latitude",e.location.latitude.toString(),"--longitude",e.location.longitude.toString(),"--planets",e.planets.join(","),"--precision",this.config.precision];e.options?.includeRetrograde&&a.push("--include-retrograde"),e.options?.calculateAspects&&a.push("--calculate-aspects"),e.options?.includeHouses&&a.push("--include-houses"),e.options?.heliocentric&&a.push("--heliocentric");let r=await this.executePythonScript(a);if(!r.success||!r.data)throw Error(`Planetary calculation failed: ${r.error}`);let i=this.parsePlanetaryData(r.data);return this.setCache(t,i),i}catch(e){throw console.error("Planetary position calculation error:",e),e}}async calculateAspects(e,t,a=8){if(!this.isInitialized)throw Error("Swiss Ephemeris bridge not initialized");let r=this.generateCacheKey("aspects",{planets:e,datetime:t,orbTolerance:a}),i=this.getFromCache(r);if(i)return i;try{if(this.config.useMockData){let i=this.generateMockAspectData(e,t,a);return this.setCache(r,i),i}let i=["aspect_calculator.py","--datetime",t.toISOString(),"--planets",e.join(","),"--orb-tolerance",a.toString(),"--precision",this.config.precision],n=await this.executePythonScript(i);if(!n.success||!n.data)throw Error(`Aspect calculation failed: ${n.error}`);let o=this.parseAspectData(n.data);return this.setCache(r,o),o}catch(e){throw console.error("Aspect calculation error:",e),e}}async detectRetrogrades(e,t,a){if(!this.isInitialized)throw Error("Swiss Ephemeris bridge not initialized");let r=this.generateCacheKey("retrogrades",{planet:e,startDate:t,endDate:a}),i=this.getFromCache(r);if(i)return i;try{if(this.config.useMockData){let i=this.generateMockRetrogradeData(e,t,a);return this.setCache(r,i),i}let i=["retrograde_detector.py","--planet",e,"--start-date",t.toISOString(),"--end-date",a.toISOString(),"--precision",this.config.precision],n=await this.executePythonScript(i);if(!n.success||!n.data)throw Error(`Retrograde detection failed: ${n.error}`);let o=this.parseRetrogradeData(n.data);return this.setCache(r,o),o}catch(e){throw console.error("Retrograde detection error:",e),e}}async calculateCosmicWeather(e,t){if(!this.isInitialized)throw Error("Swiss Ephemeris bridge not initialized");let a=this.generateCacheKey("cosmic_weather",{datetime:e,location:t}),r=this.getFromCache(a);if(r)return r;try{if(this.config.useMockData){let t=this.generateMockCosmicWeather(e);return this.setCache(a,t),t}let r=["cosmic_weather.py","--datetime",e.toISOString(),"--latitude",t.latitude.toString(),"--longitude",t.longitude.toString(),"--precision",this.config.precision],i=await this.executePythonScript(r);if(!i.success||!i.data)throw Error(`Cosmic weather calculation failed: ${i.error}`);let n=this.parseCosmicWeatherData(i.data);return this.setCache(a,n),n}catch(e){throw console.error("Cosmic weather calculation error:",e),e}}async calculateMoonPhase(e){if(!this.isInitialized)throw Error("Swiss Ephemeris bridge not initialized");let t=this.generateCacheKey("moon_phase",{datetime:e}),a=this.getFromCache(t);if(a)return a;try{if(this.config.useMockData){let a=this.generateMockMoonData(e);return this.setCache(t,a),a}let a=["moon_calculator.py","--datetime",e.toISOString(),"--precision",this.config.precision],r=await this.executePythonScript(a);if(!r.success||!r.data)throw Error(`Moon phase calculation failed: ${r.error}`);let i=this.parseMoonData(r.data);return this.setCache(t,i),i}catch(e){throw console.error("Moon phase calculation error:",e),e}}async validateInstallation(){try{let e=await fetch(`${this.config.apiEndpoint}/status`,{method:"GET",signal:AbortSignal.timeout(this.config.timeout)});return{success:e.ok,data:await e.text(),error:e.ok?void 0:`API validation failed: ${e.status}`}}catch(e){return{success:!1,error:e instanceof Error?e.message:String(e)}}}async executePythonScript(e){let t=Date.now();try{let a=await fetch(`${this.config.apiEndpoint}/${e[0].replace(".py","")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({args:e.slice(1)}),signal:AbortSignal.timeout(this.config.timeout)}),r=Date.now()-t;if(!a.ok)throw Error(`API request failed: ${a.status}`);return{success:!0,data:await a.json(),calculationTime:r,precision:this.config.precision}}catch(e){return{success:!1,error:e instanceof Error?e.message:String(e),calculationTime:Date.now()-t}}}generateMockPlanetaryData(e){let t=Date.now(),a=Math.floor((t-new Date(new Date().getFullYear(),0,0).getTime())/864e5);return e.planets.map((e,r)=>{let i=(a+30*r)%360,n=(i+10*Math.sin(t/1e6))%360,o=23.5*Math.sin((i+45*r)*Math.PI/180),s=this.getZodiacSign(i);return{planet:this.getPlanetEnum(e),name:e,symbol:this.getPlanetSymbol(e),coordinates:{ra:n,dec:o},position:{ra:n,dec:o},eclipticLongitude:i,eclipticLatitude:5*Math.sin(t/2e6+r),distance:1+.5*Math.sin(t/5e6+r),magnitude:r<5?-2+.5*r:2+3*Math.random(),phase:"moon"===e.toLowerCase()?(Math.sin(t/25e5)+1)/2:1,angularDiameter:30/(1+r),angularSize:30/(1+r),speed:1-.1*r,retrograde:-.8>Math.sin(t/1e7+r),sign:this.getZodiacSignEnum(s),zodiacSign:s,degree:i%30,zodiacDegree:i%30,house:Math.floor(i/30)%12+1}})}getPlanetSymbol(e){return({sun:"‚òâ",moon:"‚òΩ",mercury:"‚òø",venus:"‚ôÄ",mars:"‚ôÇ",jupiter:"‚ôÉ",saturn:"‚ôÑ",uranus:"‚ôÖ",neptune:"‚ôÜ",pluto:"‚ôá"})[e]||"‚óã"}getZodiacSign(e){return["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"][Math.floor(e/30)%12]}getZodiacSignEnum(e){return({Aries:s.ARIES,Taurus:s.TAURUS,Gemini:s.GEMINI,Cancer:s.CANCER,Leo:s.LEO,Virgo:s.VIRGO,Libra:s.LIBRA,Scorpio:s.SCORPIO,Sagittarius:s.SAGITTARIUS,Capricorn:s.CAPRICORN,Aquarius:s.AQUARIUS,Pisces:s.PISCES})[e]||s.ARIES}getPlanetEnum(e){return({sun:o.SUN,moon:o.MOON,mercury:o.MERCURY,venus:o.VENUS,mars:o.MARS,jupiter:o.JUPITER,saturn:o.SATURN,uranus:o.URANUS,neptune:o.NEPTUNE,pluto:o.PLUTO,chiron:o.CHIRON,"north node":o.NORTH_NODE,"south node":o.SOUTH_NODE})[e.toLowerCase()]||o.SUN}generateMockAspectData(e,t,a){let r=[],i=[l.CONJUNCTION,l.SEXTILE,l.SQUARE,l.TRINE,l.OPPOSITION];for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(.3>Math.random()){let o=i[Math.floor(Math.random()*i.length)],s=.5>Math.random();r.push({planet1:this.getPlanetEnum(e[t]),planet2:this.getPlanetEnum(e[n]),aspect:o,type:o,angle:this.getAspectAngle(o)+(Math.random()-.5)*a,orb:Math.random()*a,exact:.1>Math.random(),applying:s,separating:!s,influence:this.getAspectInfluence(o),strength:Math.random()})}return r}getAspectAngle(e){return({[l.CONJUNCTION]:0,[l.SEXTILE]:60,[l.SQUARE]:90,[l.TRINE]:120,[l.OPPOSITION]:180,[l.SEMISEXTILE]:30,[l.QUINCUNX]:150,[l.SEMISQUARE]:45,[l.SESQUIQUADRATE]:135})[e]||0}getAspectInfluence(e){let t=[l.CONJUNCTION,l.SEXTILE,l.TRINE],a=[l.SQUARE,l.OPPOSITION];return t.includes(e)?"harmonious":a.includes(e)?"challenging":"neutral"}generateMockRetrogradeData(e,t,a){let r=[],i=Math.floor(3*Math.random())+1;for(let n=0;n<i;n++){let i=new Date(t.getTime()+Math.random()*(a.getTime()-t.getTime())),n=30+60*Math.random(),o=new Date(i.getTime()+24*n*36e5),s=new Date((i.getTime()+o.getTime())/2);r.push({planet:this.getPlanetEnum(e),startDate:i,endDate:o,peakDate:s,shadow:{pre:new Date(i.getTime()-12096e5),post:new Date(o.getTime()+12096e5)},zodiacRange:{start:{sign:"Gemini",degree:15},end:{sign:"Gemini",degree:5}}})}return r}generateMockCosmicWeather(e){let t={phase:"Waxing Gibbous",illumination:.75,age:10,zodiacSign:"Cancer",distance:384400,angularSize:31,libration:{longitude:0,latitude:0},nextPhase:{type:"Full Moon",date:new Date(e.getTime()+2592e5)}};return{timestamp:e,moonPhase:t,planetaryHours:{current:{planet:"Venus",startTime:e,endTime:new Date(e.getTime()+36e5)},next:{planet:"Mercury",startTime:new Date(e.getTime()+36e5)},ruler:"Sun",dayNight:18>e.getHours()?"day":"night"},aspects:{major:[],minor:[],applying:[]},retrogrades:[],cosmicIntensity:"active",spiritualInfluences:[],optimalActivities:[]}}generateMockMoonData(e){return{phase:"waxing-gibbous",illumination:.75,age:10,distance:384400,angularSize:31,nextNewMoon:new Date(e.getTime()+15552e5),nextFullMoon:new Date(e.getTime()+2592e5)}}generateCacheKey(e,t){return`${e}_${JSON.stringify(t)}_${this.config.precision}`}getFromCache(e){let t=this.calculationCache.get(e);return t&&Date.now()-t.timestamp<this.CACHE_TTL?t.data:(this.calculationCache.delete(e),null)}setCache(e,t){this.calculationCache.set(e,{data:t,timestamp:Date.now()})}parsePlanetaryData(e){return e.planets.map(e=>{let t=e.zodiac_sign;return{planet:this.getPlanetEnum(e.name),name:e.name,symbol:e.symbol,coordinates:{ra:e.ra,dec:e.dec},position:{ra:e.ra,dec:e.dec},eclipticLongitude:e.longitude,eclipticLatitude:e.latitude,distance:e.distance,magnitude:e.magnitude,phase:e.phase||1,angularDiameter:e.angular_size,angularSize:e.angular_size,speed:e.speed,retrograde:e.retrograde,sign:this.getZodiacSignEnum(t),zodiacSign:t,degree:e.zodiac_degree,zodiacDegree:e.zodiac_degree,house:e.house}})}parseAspectData(e){return e.aspects.map(e=>{let t=this.parseAspectType(e.type);return{planet1:this.getPlanetEnum(e.planet1),planet2:this.getPlanetEnum(e.planet2),aspect:t,type:t,angle:e.angle,orb:e.orb,exact:e.exact,applying:e.applying,separating:!e.applying,influence:e.influence,strength:e.strength}})}parseAspectType(e){return({conjunction:l.CONJUNCTION,sextile:l.SEXTILE,square:l.SQUARE,trine:l.TRINE,opposition:l.OPPOSITION,semisextile:l.SEMISEXTILE,quincunx:l.QUINCUNX,semisquare:l.SEMISQUARE,sesquiquadrate:l.SESQUIQUADRATE})[e.toLowerCase()]||l.CONJUNCTION}parseRetrogradeData(e){return e.retrogrades.map(e=>{let t=e.shadow,a=e.zodiac_range;return{planet:e.planet,startDate:new Date(e.start_date),endDate:new Date(e.end_date),peakDate:new Date(e.peak_date),shadow:{pre:new Date(t.pre),post:new Date(t.post)},zodiacRange:{start:a.start,end:a.end}}})}parseCosmicWeatherData(e){let t=e.aspects;return{timestamp:new Date(e.timestamp),moonPhase:e.moon_phase,planetaryHours:e.planetary_hours,aspects:{major:t.major,minor:t.minor,applying:t.applying},retrogrades:e.retrogrades,cosmicIntensity:e.cosmic_intensity,spiritualInfluences:e.spiritual_influences,optimalActivities:e.optimal_activities,warnings:e.warnings}}parseMoonData(e){return{phase:e.phase,illumination:e.illumination,age:e.age,distance:e.distance,angularSize:e.angular_size,nextNewMoon:new Date(e.next_new_moon),nextFullMoon:new Date(e.next_full_moon)}}clearCache(){this.calculationCache.clear()}getStatistics(){return{cacheSize:this.calculationCache.size,isInitialized:this.isInitialized,config:this.config}}async getObliquity(e){return console.log(`Calculating mock obliquity for ${e}`),Promise.resolve(23.439281)}}new c;class d{static{this.CATALOG_URLS={hipparcos:"/data/catalogs/hipparcos_bright.json",yale:"/data/catalogs/yale_bright_star.json",gaia:"/data/catalogs/gaia_dr3_bright.json",messier:"/data/catalogs/messier.json",constellations:"/data/catalogs/constellation_lines.json"}}static{this.SPECTRAL_COLORS={O:{r:.59,g:.67,b:1,temp:3e4},B:{r:.67,g:.78,b:1,temp:2e4},A:{r:.83,g:.87,b:1,temp:8500},F:{r:.96,g:.94,b:1,temp:6500},G:{r:1,g:.95,b:.81,temp:5500},K:{r:1,g:.85,b:.63,temp:4500},M:{r:1,g:.73,b:.54,temp:3e3}}}async loadCatalog(e,t={}){let a=`${e}_${JSON.stringify(t)}`;if(this.catalogCache.has(a))return this.catalogCache.get(a);if(this.loadingPromises.has(a))return this.loadingPromises.get(a);let r=this.loadCatalogData(e,t);this.loadingPromises.set(a,r);try{let e=await r;return this.catalogCache.set(a,e),this.loadingPromises.delete(a),e}catch(e){throw this.loadingPromises.delete(a),e}}async loadConstellationLines(){try{let e=await fetch(d.CATALOG_URLS.constellations);return await e.json()}catch(e){return console.error("Failed to load constellation lines:",e),{}}}async getNavigationStars(){let e=["Alpheratz","Ankaa","Schedar","Diphda","Achernar","Hamal","Acamar","Menkar","Mirfak","Aldebaran","Rigel","Capella","Bellatrix","Elnath","Alnilam","Betelgeuse","Canopus","Sirius","Adhara","Procyon","Pollux","Avior","Suhail","Miaplacidus","Alphard","Regulus","Dubhe","Denebola","Gienah","Acrux","Gacrux","Alioth","Spica","Alkaid","Hadar","Menkent","Arcturus","Rigil Kentaurus","Zubenelgenubi","Kochab","Alphecca","Antares","Atria","Sabik","Shaula","Rasalhague","Eltanin","Kaus Australis","Vega","Nunki","Altair","Peacock","Deneb","Enif","Alnair","Fomalhaut","Markab"];return(await this.loadCatalog("hipparcos",{maxMagnitude:3})).filter(t=>t.name&&e.includes(t.name))}async loadCatalogData(e,t){if("hipparcos"===e)return this.generateHipparcosCatalog(t);if("yale"===e)return this.generateYaleBrightStars(t);if("messier"===e)return this.loadMessierObjects();throw Error(`Unknown catalog type: ${e}`)}generateHipparcosCatalog(e){let t=[],a=e.maxMagnitude??6.5,r=this.getRealBrightStars();t.push(...r.filter(e=>e.magnitude<=a));let i=Math.min(1e5,Math.floor(10**(a/2.5)));for(let r=0;r<i;r++){let i=this.generateRealisticStar(r,a);this.passesFilters(i,e)&&t.push(i)}return t}getRealBrightStars(){return[{id:"HIP32349",name:"Sirius",ra:101.287155,dec:-16.716116,magnitude:-1.46,spectralType:"A1V",distance:8.6,properMotion:{ra:-546.01,dec:-1223.07},constellation:"CMa",colorIndex:0},{id:"HIP30438",name:"Canopus",ra:95.987958,dec:-52.695661,magnitude:-.74,spectralType:"A9II",distance:310,properMotion:{ra:19.93,dec:23.24},constellation:"Car",colorIndex:.15},{id:"HIP69673",name:"Arcturus",ra:213.9153,dec:19.182409,magnitude:-.05,spectralType:"K1.5III",distance:36.7,properMotion:{ra:-1093.45,dec:-1999.4},constellation:"Boo",colorIndex:1.23},{id:"HIP91262",name:"Vega",ra:279.234735,dec:38.783689,magnitude:.03,spectralType:"A0V",distance:25,properMotion:{ra:200.94,dec:286.23},constellation:"Lyr",colorIndex:0},{id:"HIP24608",name:"Rigel",ra:78.634467,dec:-8.201638,magnitude:.13,spectralType:"B8I",distance:860,properMotion:{ra:1.87,dec:-.56},constellation:"Ori",colorIndex:-.03},{id:"HIP37279",name:"Procyon",ra:114.825493,dec:5.224993,magnitude:.37,spectralType:"F5IV",distance:11.5,properMotion:{ra:-714.59,dec:-1036.8},constellation:"CMi",colorIndex:.42},{id:"HIP27989",name:"Betelgeuse",ra:88.792939,dec:7.407064,magnitude:.5,spectralType:"M1I",distance:548,properMotion:{ra:27.33,dec:10.86},constellation:"Ori",colorIndex:1.85,variableType:"SRc"},{id:"HIP21421",name:"Aldebaran",ra:68.980163,dec:16.509302,magnitude:.85,spectralType:"K5III",distance:65.3,properMotion:{ra:62.78,dec:-189.35},constellation:"Tau",colorIndex:1.54},{id:"HIP65474",name:"Spica",ra:201.298247,dec:-11.16132,magnitude:.97,spectralType:"B1III",distance:250,properMotion:{ra:-42.5,dec:-31.73},constellation:"Vir",colorIndex:-.24,variableType:"ELL"},{id:"HIP80763",name:"Antares",ra:247.351915,dec:-26.432003,magnitude:1.09,spectralType:"M1.5I",distance:600,properMotion:{ra:-12.11,dec:-23.3},constellation:"Sco",colorIndex:1.83,variableType:"LC"}].map(e=>({id:e.id,name:e.name,coordinates:{ra:e.ra,dec:e.dec},ra:e.ra,dec:e.dec,magnitude:e.magnitude,colorIndex:e.colorIndex,spectralClass:e.spectralType,spectralType:e.spectralType,properMotion:e.properMotion||{ra:0,dec:0},parallax:e.distance?1e3/e.distance:void 0,distance:e.distance,constellation:e.constellation,variableType:e.variableType}))}generateRealisticStar(e,t){let a=30*this.gaussianRandom(),r=360*Math.random(),i=this.galacticToEquatorial(r,a),n=this.generateMagnitude(t),o=this.generateSpectralType(n),s=this.estimateDistance(n,o),l=this.getConstellation(i.ra,i.dec),c=this.getColorIndex(o);return{id:`SYN${e}`,name:void 0,coordinates:i,ra:i.ra,dec:i.dec,magnitude:n,colorIndex:c,spectralClass:o,spectralType:o,properMotion:{ra:0,dec:0},distance:s,constellation:l}}galacticToEquatorial(e,t){let a=e*Math.PI/180,r=t*Math.PI/180,i=27.12825*Math.PI/180,n=122.93192*Math.PI/180,o=Math.asin(Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.sin(a-n)),s=Math.atan2(Math.cos(r)*Math.cos(a-n),Math.sin(r)*Math.cos(i)-Math.cos(r)*Math.sin(i)*Math.sin(a-n))+192.85948*Math.PI/180;return s<0&&(s+=2*Math.PI),{ra:180*s/Math.PI,dec:180*o/Math.PI}}generateMagnitude(e){return -2.5*Math.log10(1-Math.random()*(1-Math.pow(10,-.4*e)))}generateSpectralType(e){let t,a=Math.random();t=e<2?a<.05?"O":a<.15?"B":a<.3?"A":a<.45?"F":a<.6?"G":a<.8?"K":"M":a<.001?"O":a<.01?"B":a<.05?"A":a<.15?"F":a<.3?"G":a<.6?"K":"M";let r=Math.floor(10*Math.random()),i=e<3?["I","II","III","IV","V"][Math.floor(5*Math.random())]:"V";return`${t}${r}${i}`}estimateDistance(e,t){return 3.26156*Math.pow(10,(e-(({O:-5.7,B:-1.1,A:1.4,F:3,G:4.6,K:5.9,M:9})[t[0]]||5)+5)/5)}getColorIndex(e){return({O:-.33,B:-.17,A:0,F:.38,G:.63,K:1,M:1.4})[e[0]]||.63}getConstellation(e,t){if(t>55)return"UMa";if(t<-55)return"Cru";let a=e/15;return a<3?"Psc":a<6?"Ori":a<9?"Leo":a<12?"Vir":a<15?"Sco":a<18?"Sgr":a<21?"Cyg":"And"}generateYaleBrightStars(e){return this.generateHipparcosCatalog({...e,maxMagnitude:6.5})}async loadMessierObjects(){return[{id:"M1",name:"Crab Nebula",ra:83.633,dec:22.014,magnitude:8.4,type:"SNR"},{id:"M31",name:"Andromeda Galaxy",ra:10.685,dec:41.269,magnitude:3.4,type:"Galaxy"},{id:"M42",name:"Orion Nebula",ra:83.82,dec:-5.391,magnitude:4,type:"Nebula"},{id:"M45",name:"Pleiades",ra:56.871,dec:24.105,magnitude:1.6,type:"Cluster"}].map(e=>({id:e.id,name:e.name,coordinates:{ra:e.ra,dec:e.dec},ra:e.ra,dec:e.dec,magnitude:e.magnitude,colorIndex:0,spectralClass:e.type,spectralType:e.type,properMotion:{ra:0,dec:0},constellation:this.getConstellation(e.ra,e.dec),metadata:{messier:!0,type:e.type}}))}passesFilters(e,t){if(t.maxMagnitude&&e.magnitude>t.maxMagnitude)return!1;let a=e.dec??e.coordinates.dec;return(!t.minDeclination||!(a<t.minDeclination))&&(!t.maxDeclination||!(a>t.maxDeclination))&&(!t.constellations||!e.constellation||!!t.constellations.includes(e.constellation))}gaussianRandom(){let e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}static getStarColor(e){if(!e)return{r:1,g:1,b:1};let t=e[0].toUpperCase();return this.SPECTRAL_COLORS[t]||{r:1,g:1,b:1}}clearCache(){this.catalogCache.clear(),this.loadingPromises.clear()}constructor(){this.catalogCache=new Map,this.loadingPromises=new Map}}class h{constructor(){this.observerLocation={latitude:40.7128,longitude:-74.006,elevation:10,timezone:"America/New_York"},this.config={ephemerisAccuracy:"medium",updateInterval:1e3,precessionCorrection:!0,nutationCorrection:!0,aberrationCorrection:!0,refractionCorrection:!0},this.swissEphemeris=new c({precision:"high",timeout:3e4}),this.starCatalogLoader=new d}eclipticToZodiac(e){let t=[s.ARIES,s.TAURUS,s.GEMINI,s.CANCER,s.LEO,s.VIRGO,s.LIBRA,s.SCORPIO,s.SAGITTARIUS,s.CAPRICORN,s.AQUARIUS,s.PISCES],a=(e%360+360)%360;return{sign:t[Math.floor(a/30)],degree:a%30}}async initialize(e){this.config={...this.config,...e},await this.swissEphemeris.initialize()||console.warn("‚ö†Ô∏è Swiss Ephemeris bridge failed to initialize, falling back to placeholder calculations"),console.log("\uD83C\uDF1F Production Astronomical Engine initialized with Swiss Ephemeris")}setObserverLocation(e){this.observerLocation=e}async loadStarCatalog(e){try{console.log(`üì° Loading ${e} star catalog...`);let t=(await this.starCatalogLoader.loadCatalog(e,{maxMagnitude:6.5,minDeclination:-90,maxDeclination:90})).map(e=>({id:e.id,name:e.name,coordinates:{ra:e.ra??0,dec:e.dec??0},magnitude:e.magnitude,colorIndex:e.colorIndex||0,spectralClass:e.spectralType||"G2V",properMotion:e.properMotion||{ra:0,dec:0},parallax:e.distance?1e3/e.distance:void 0,constellation:e.constellation||"UNK"}));return console.log(`‚ú® Loaded ${t.length} stars from ${e} catalog`),t}catch(t){return console.error(`Failed to load ${e} catalog:`,t),[]}}async getVisibleStars(){return[]}transformCoordinates(){return{x:0,y:0,visible:!1}}equatorialToHorizontal(){return{azimuth:0,altitude:0}}async getPlanetaryPositions(e,t){try{let a=(await this.swissEphemeris.calculatePlanetaryPositions({planets:["sun","moon","mercury","venus","mars","jupiter","saturn","uranus","neptune","pluto"],datetime:e,location:{...t,lat:t.latitude,lon:t.longitude,altitude:t.elevation},options:{includeRetrograde:!0,calculateAspects:!1,includeHouses:!1,heliocentric:!1}})).map(e=>{let t=this.eclipticToZodiac(e.eclipticLongitude);return{planet:e.name,coordinates:{ra:e.position?.ra??e.coordinates?.ra??0,dec:e.position?.dec??e.coordinates?.dec??0},horizontalCoords:{azimuth:0,altitude:0},eclipticLongitude:e.eclipticLongitude,eclipticLatitude:e.eclipticLatitude,distance:e.distance,angularDiameter:e.angularSize??e.angularDiameter??0,magnitude:e.magnitude,phase:e.phase,retrograde:e.retrograde,sign:t.sign,degree:t.degree}});return console.log(`ü™ê Calculated ${a.length} planetary positions for ${e.toISOString()}`),a}catch(e){return console.error("Error calculating planetary positions:",e),[]}}async getPlanetPosition(e,t,a){let r=(await this.getPlanetaryPositions(t,a)).find(t=>t.planet===e);if(!r)throw Error(`Planet position not found: ${e}`);return r}calculateAspects(){return[]}async detectRetrogrades(e,t){return[]}calculateHouses(e,t,a){return Array(12).fill(0)}async getMoonPhase(e){throw Error("Not implemented - awaiting Claude Opus 4 algorithms")}async getMoonPosition(e,t){throw Error("Not implemented - awaiting Claude Opus 4 algorithms")}calculatePrecession(e,t){return{deltaRA:0,deltaDec:0}}calculatePrecessionMatrix(e,t,a){let r=Math.cos(e),i=Math.sin(e),n=Math.cos(t),o=Math.sin(t),s=Math.cos(a),l=Math.sin(a);return[[r*n*s-i*o,-i*n*s-r*o,-o*s],[r*o*s+i*n,-i*o*s+r*n,n*s],[r*l,-i*l,s]]}calculateLimitingMagnitude(e){return Math.min(6.5+(e.elevation||0)/1e3*.1,7)}isMilkyWayVisible(e){return this.calculateLimitingMagnitude(e)>5}calculateVisualBrightness(e){return e<=0?0:Math.max(0,Math.min(1,Math.exp(-.2*(1/Math.sin(e*Math.PI/180)-1))))}async getVisibleSky(e,t){throw Error("Not implemented - awaiting Claude Opus 4 algorithms")}async calculateCosmicWeather(e){throw Error("Not implemented - awaiting Claude Opus 4 algorithms")}getPlanetaryHour(e,t){return o.SUN}dateToJulianDay(e){let t=Math.floor((14-(e.getMonth()+1))/12),a=e.getFullYear()+4800-t,r=e.getMonth()+1+12*t-3;return e.getDate()+Math.floor((153*r+2)/5)+365*a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400)-32045}julianDayToDate(e){let t=e+32044,a=Math.floor((4*t+3)/146097),r=t-Math.floor(146097*a/4),i=Math.floor((4*r+3)/1461),n=r-Math.floor(1461*i/4),o=Math.floor((5*n+2)/153),s=n-Math.floor((153*o+2)/5)+1,l=o+3-12*Math.floor(o/10);return new Date(100*a+i-4800+Math.floor(o/10),l-1,s)}getSiderealTime(e,t){return 0}async preloadEphemerisData(e,t){console.log(`üìä Preloading ephemeris data from ${e.toISOString()} to ${t.toISOString()}`)}clearCache(){console.log("\uD83D\uDDD1Ô∏è Clearing astronomical calculation cache")}}let u=new h,g=(e={})=>{let{enableHighAccuracy:t=!0,timeout:a=1e4,maximumAge:r=3e5,fallbackLocation:n={latitude:40.7128,longitude:-74.006,elevation:10,timezone:"America/New_York"}}=e,o=(0,i.useMemo)(()=>n,[n]),s=(0,i.useRef)(!1),[l,c]=(0,i.useState)({location:null,loading:!1,error:null,permission:"unknown"}),d=async(e,t)=>{try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return e;let a=Math.round(t/15);if(a>=-12&&a<=12)return`UTC${a>=0?"+":""}${a}`;return"UTC"}catch{return"UTC"}},h=()=>0,u=(0,i.useCallback)(async()=>{if(!s.current){if(!navigator.geolocation)return void c(e=>({...e,error:"Geolocation is not supported by this browser",permission:"denied",location:o}));s.current=!0,c(e=>({...e,loading:!0,error:null}));try{if("permissions"in navigator){let e=await navigator.permissions.query({name:"geolocation"});if(c(t=>({...t,permission:e.state})),"denied"===e.state){c(e=>({...e,loading:!1,error:"Geolocation permission denied",location:o})),s.current=!1;return}}navigator.geolocation.getCurrentPosition(async e=>{let{latitude:t,longitude:a,altitude:r}=e.coords;try{let e=await d(t,a),i=r||h(),n={latitude:t,longitude:a,elevation:i,timezone:e};c(e=>({...e,location:n,loading:!1,error:null,permission:"granted"})),s.current=!1}catch{let e={latitude:t,longitude:a,elevation:r||0,timezone:o.timezone};c(t=>({...t,location:e,loading:!1,error:null,permission:"granted"})),s.current=!1}},e=>{let t="Failed to get location";switch(e.code){case e.PERMISSION_DENIED:t="Location access denied by user";break;case e.POSITION_UNAVAILABLE:t="Location information unavailable";break;case e.TIMEOUT:t="Location request timed out"}c(a=>({...a,loading:!1,error:t,permission:e.code===e.PERMISSION_DENIED?"denied":a.permission,location:o})),s.current=!1},{enableHighAccuracy:t,timeout:a,maximumAge:r})}catch(e){c(t=>({...t,loading:!1,error:e instanceof Error?e.message:"Unknown error",location:o})),s.current=!1}}},[t,r,a,o]);return(0,i.useEffect)(()=>{u()},[u]),{...l,requestLocation:u,watchLocation:()=>navigator.geolocation?navigator.geolocation.watchPosition(async e=>{let{latitude:t,longitude:a,altitude:r}=e.coords,i=await d(t,a),n={latitude:t,longitude:a,elevation:r||h(),timezone:i};c(e=>({...e,location:n,error:null}))},e=>{console.warn("Geolocation watch error:",e)},{enableHighAccuracy:t,timeout:a,maximumAge:r}):null,clearLocation:()=>{c(e=>({...e,location:null,error:null}))},useFallback:()=>{c(e=>({...e,location:o,error:null,loading:!1}))},hasLocation:!!l.location,isLocationAccurate:"granted"===l.permission&&!!l.location}};var p=a(88566),m=a(13967),f=a.n(m);let S=({useRealStars:e=!1,renderConfig:t={},className:a="",onStarClick:o,onPerformanceUpdate:s})=>{let l=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(0),h=(0,i.useRef)(s);(0,i.useEffect)(()=>{h.current=s},[s]);let[m,S]=(0,i.useState)(!1),[M,w]=(0,i.useState)(null),[y,C]=(0,i.useState)(0),{location:I,loading:b}=g(),A=(0,i.useCallback)(e=>({...e,ra:e.ra??e.coordinates.ra,dec:e.dec??e.coordinates.dec,colorIndex:e.colorIndex??0,spectralClass:e.spectralClass??"Unknown",spectralType:e.spectralType??e.spectralClass??"Unknown",constellation:e.constellation??"Unknown",properMotion:e.properMotion??{ra:0,dec:0}}),[]),P=(0,i.useMemo)(()=>({starCatalog:"hipparcos",maxStars:1e5,minMagnitude:6.5,showConstellations:!1,showPlanets:!0,showDeepSky:!1,coordinateSystem:"horizontal",projection:"stereographic",...t}),[t]),_=(0,i.useCallback)(()=>{let e=t=>{if(c.current){let e=c.current.render(t);h.current&&h.current({totalStars:e.totalStars,visibleStars:e.visibleStars,fps:e.fps,renderTime:e.renderTime})}d.current=requestAnimationFrame(e)};d.current=requestAnimationFrame(e)},[]),x=(0,i.useCallback)(async()=>{if(!l.current)return void console.log("‚ùå Canvas ref not available");try{S(!0),w(null),console.log("\uD83D\uDE80 Initializing high-performance star renderer...");let t=l.current,a=t.getBoundingClientRect();console.log(`üìê Canvas size: ${a.width}x${a.height}`);let r=new n(t);c.current=r,r.resize(a.width,a.height),console.log(`üìê Renderer resized to: ${a.width}x${a.height}`);let i=[];e&&I?(console.log("\uD83C\uDF1F Loading real astronomical star data..."),await u.initialize({ephemerisAccuracy:"high",updateInterval:1e3,precessionCorrection:!0,nutationCorrection:!0,aberrationCorrection:!0,refractionCorrection:!0}),i=(await u.loadStarCatalog(P.starCatalog)).filter(e=>e.magnitude<=P.minMagnitude).slice(0,P.maxStars).sort((e,t)=>e.magnitude-t.magnitude).map(A),console.log(`‚ú® Loaded ${i.length} real stars from ${P.starCatalog} catalog`)):(console.log(`üé® Generating ${P.maxStars} procedural stars...`),i=E(P.maxStars),console.log(`‚úÖ Generated ${i.length} procedural stars for testing`),console.log("Sample star:",i[0])),console.log(`üì§ Loading ${i.length} stars into renderer...`),r.loadStars(i),C(i.length),console.log(`‚úÖ Stars loaded into renderer`);let o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=a.width/a.height,d=R(Math.PI/2,s,.1,10);console.log(`üì∑ Camera setup: FOV=90\xb0, aspect=${s.toFixed(2)}, near=0.1, far=10.0`),r.updateMatrices(o,d),console.log(`üé¨ Starting render loop...`),_(),console.log(`‚úÖ Render loop started`)}catch(e){console.error("Failed to initialize high-performance star renderer:",e),w(e instanceof Error?e.message:"Unknown error")}finally{S(!1)}},[e,I,P,A,_]),E=e=>{let t=[];for(let a=0;a<e;a++){let e=360*Math.random(),r=(Math.random()-.5)*180,i={id:`proc_${a}`,name:`Star ${a}`,coordinates:{ra:e,dec:r},ra:e,dec:r,magnitude:1+5*Math.pow(Math.random(),.3),colorIndex:(Math.random()-.5)*2,spectralClass:"G2V",spectralType:"G2V",properMotion:{ra:0,dec:0},constellation:"Generated"};t.push(i)}return t},R=(e,t,a,r)=>{let i=1/Math.tan(e/2),n=1/(a-r);return new Float32Array([i/t,0,0,0,0,i,0,0,0,0,(a+r)*n,-1,0,0,a*r*n*2,0])},v=(0,i.useCallback)(()=>{if(l.current&&c.current){let e=l.current.getBoundingClientRect();c.current.resize(e.width,e.height)}},[]);(0,i.useEffect)(()=>(b||x(),()=>{d.current&&cancelAnimationFrame(d.current),c.current&&c.current.dispose()}),[x,b]),(0,i.useEffect)(()=>(window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)),[v]);let T=(0,i.useCallback)(e=>{if(!o||!c.current)return;let t=l.current?.getBoundingClientRect();if(!t)return;let a=e.clientX-t.left,r=e.clientY-t.top;console.log(`Star click at (${a}, ${r})`)},[o]);return(0,r.jsxs)("div",{className:`${f().starFieldContainer} ${a}`,children:[(0,r.jsx)(p.L,{intensity:.8,showMilkyWay:!0,animated:!0,className:f().galaxyBackground}),(0,r.jsx)("canvas",{ref:l,className:f().starCanvas,onClick:T}),m&&(0,r.jsxs)("div",{className:f().loadingOverlay,children:[(0,r.jsx)("div",{className:f().loadingSpinner}),(0,r.jsxs)("p",{children:["Loading ",e?"real astronomical":"procedural"," star data..."]})]}),M&&(0,r.jsx)("div",{className:f().errorOverlay,children:(0,r.jsxs)("div",{className:f().errorMessage,children:[(0,r.jsx)("h3",{children:"‚ö†Ô∏è Rendering Error"}),(0,r.jsx)("p",{children:M}),(0,r.jsx)("button",{onClick:()=>w(null),children:"Retry"})]})}),!m&&!M&&(0,r.jsxs)("div",{className:f().performanceInfo,children:[(0,r.jsxs)("span",{className:f().starCount,children:["‚≠ê ",y.toLocaleString()," stars"]}),(0,r.jsx)("span",{className:f().mode,children:e?"\uD83D\uDD2C Real Data":"\uD83C\uDFA8 Procedural"})]})]})}},88566:(e,t,a)=>{"use strict";a.d(t,{L:()=>s});var r=a(60687),i=a(43210),n=a(92411),o=a.n(n);let s=({className:e="",intensity:t=.7,showMilkyWay:a=!0,animated:n=!0,starCount:s})=>{let l=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e,r=l.current;if(!r)return;let i=r.getContext("2d");if(!i)return;let o=()=>{let e=r.getBoundingClientRect(),n=e.width,o=e.height;i.clearRect(0,0,n,o);let l=s||Math.min(75,Math.floor(n*o/16e3));for(let e=0;e<l;e++){let e,a=Math.random()*n,r=Math.random()*o,s=1.5*Math.random(),l=Math.random()*t*.4,c=Math.random();i.fillStyle=e=c<.1?`rgba(155, 176, 255, ${l})`:c<.3?`rgba(202, 215, 255, ${l})`:c<.6?`rgba(255, 244, 234, ${l})`:c<.8?`rgba(255, 210, 161, ${l})`:`rgba(255, 204, 111, ${l})`,i.beginPath(),i.arc(a,r,s,0,2*Math.PI),i.fill(),l>.15&&(i.shadowColor=e,i.shadowBlur=+s,i.beginPath(),i.arc(a,r,.3*s,0,2*Math.PI),i.fill(),i.shadowBlur=0)}if(a){let e=i.createLinearGradient(0,.3*o,n,.7*o);e.addColorStop(0,`rgba(139, 69, 19, ${.1*t})`),e.addColorStop(.3,`rgba(160, 82, 45, ${.15*t})`),e.addColorStop(.5,`rgba(205, 133, 63, ${.2*t})`),e.addColorStop(.7,`rgba(160, 82, 45, ${.15*t})`),e.addColorStop(1,`rgba(139, 69, 19, ${.1*t})`),i.fillStyle=e,i.fillRect(0,.3*o,n,.4*o);for(let e=0;e<3;e++){let e=Math.random()*n,a=.4*o+Math.random()*o*.2,r=50+100*Math.random(),s=i.createRadialGradient(e,a,0,e,a,r),l=[`rgba(255, 20, 147, ${.1*t})`,`rgba(138, 43, 226, ${.08*t})`,`rgba(75, 0, 130, ${.05*t})`],c=l[Math.floor(Math.random()*l.length)];s.addColorStop(0,c),s.addColorStop(1,"rgba(0, 0, 0, 0)"),i.fillStyle=s,i.fillRect(e-r,a-r,2*r,2*r)}}},c=()=>{let e=r.getBoundingClientRect(),t=window.devicePixelRatio||1;r.width=e.width*t,r.height=e.height*t,r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,i.scale(t,t),o()};c(),window.addEventListener("resize",c);let d=0;if(n){let t=a=>{a-d>5e3&&(o(),d=a),e=requestAnimationFrame(t)};e=requestAnimationFrame(t)}return()=>{window.removeEventListener("resize",c),e&&cancelAnimationFrame(e)}},[t,a,n,s]),(0,r.jsxs)("div",{className:`${o().galaxyContainer} ${e}`,children:[(0,r.jsx)("div",{className:o().galaxyGradient,style:{opacity:t,background:a?`radial-gradient(ellipse at center, 
                rgba(25, 25, 112, 0.8) 0%, 
                rgba(72, 61, 139, 0.6) 30%, 
                rgba(123, 104, 238, 0.4) 50%, 
                rgba(25, 25, 112, 0.3) 70%, 
                rgba(0, 0, 0, 0.9) 100%),
               linear-gradient(45deg, 
                rgba(138, 43, 226, 0.1) 0%, 
                rgba(75, 0, 130, 0.2) 50%, 
                rgba(25, 25, 112, 0.1) 100%)`:`radial-gradient(ellipse at center, 
                rgba(25, 25, 112, 0.6) 0%, 
                rgba(0, 0, 0, 0.8) 70%, 
                rgba(0, 0, 0, 1) 100%)`}}),(0,r.jsx)("canvas",{ref:l,className:o().galaxyCanvas}),n&&(0,r.jsx)("div",{className:o().cosmicDust,style:{opacity:.3*t}})]})}},92411:e=>{e.exports={galaxyContainer:"GalaxyBackground_galaxyContainer__mFeQb",galaxyGradient:"GalaxyBackground_galaxyGradient__RF0on",galaxyPulse:"GalaxyBackground_galaxyPulse__zqda5",galaxyCanvas:"GalaxyBackground_galaxyCanvas__d5RnP",cosmicDust:"GalaxyBackground_cosmicDust__evUVZ",cosmicDrift:"GalaxyBackground_cosmicDrift__04bEb",milkyWay:"GalaxyBackground_milkyWay__XYYJt"}}};